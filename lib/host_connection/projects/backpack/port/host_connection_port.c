/************************************************************************************************************
Module:       host_connection_port

Revision:     1.0

Description:  ---

Notes:        ---

History:
Date          Name      Changes
-----------   ----      -------------------------------------------------------------------------------------
12/03/2021    TH       Began Coding    (TH = Toan Huynh)

COPYRIGHT Â© 2021 TOAN HUYNH.  ALL RIGHTS RESERVED.

THIS SOURCE IS TOAN HUYNH PROPRIETARY AND CONFIDENTIAL!  NO PART OF THIS
SOURCE MAY BE DISCLOSED IN ANY MANNER TO A THIRD PARTY WITHOUT PRIOR WRITTEN
CONSENT OF TOAN HUYNH.
************************************************************************************************************/

//###########################################################################################################
//      #INCLUDES
//###########################################################################################################
#include <stdint.h>
#include <stdbool.h>
#include "FreeRTOS.h"
#include "task.h"
#include "semphr.h"



//###########################################################################################################
//      TESTING #DEFINES
//###########################################################################################################



//###########################################################################################################
//      CONSTANT #DEFINES
//###########################################################################################################



//###########################################################################################################
//      MACROS
//###########################################################################################################



//###########################################################################################################
//      MODULE TYPES
//###########################################################################################################



//###########################################################################################################
//      CONSTANTS
//###########################################################################################################



//###########################################################################################################
//      MODULE LEVEL VARIABLES
//###########################################################################################################
static SemaphoreHandle_t host_connection_mutex;
static bool host_connection_lock_initialized  = false;

//###########################################################################################################
//      PRIVATE FUNCTION PROTOTYPES
//###########################################################################################################



//###########################################################################################################
//      PUBLIC FUNCTIONS
//###########################################################################################################
/********************************************************************************
Function:
  host_connection_lock()
Input Parameters:
  ---
Output Parameters:
  ---
Description:
  Locks the host connection mutex.
Notes:
  ---
Author, Date:
  Toan Huynh, 12/03/2021
*********************************************************************************/
bool host_connection_lock(void)
{
  if(!host_connection_lock_initialized)
  {
    host_connection_mutex = xSemaphoreCreateMutex();
    host_connection_lock_initialized = true;
  }

  /* Lock resource mutex */
  return xSemaphoreTake(host_connection_mutex, portMAX_DELAY) == pdTRUE;
}

/********************************************************************************
Function:
  host_connection_unlock()
Input Parameters:
  ---
Output Parameters:
  ---
Description:
  Unlocks the host connection mutex.
Notes:
  ---
Author, Date:
  Toan Huynh, 12/03/2021
*********************************************************************************/
void host_connection_unlock(void)
{
  /* Unlock resource mutex */
  xSemaphoreGive(host_connection_mutex);
}

//###########################################################################################################
//      PRIVATE FUNCTIONS
//###########################################################################################################


//###########################################################################################################
//      INTERRUPTS
//###########################################################################################################



//###########################################################################################################
//      TEST HARNESSES
//###########################################################################################################



//###########################################################################################################
//      END OF system_manager.c
//###########################################################################################################
